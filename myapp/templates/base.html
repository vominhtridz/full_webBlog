<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %} Sunlight{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link
      rel="icon"
      type="image/svg+xml"
      href="{% static 'images/logo_blog.png' %}"
    />
    <!-- tailwind -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
      <link rel="" href="">
    <script src="https://cdn.tailwindcss.com"></script>
    {% csrf_token %}
</head>
<body>
  <!-- Alll of topic ready to search -->

    <!--logo  -->
    <div class='fixed top-0 right-0 z-10 left-0 px-10 shadow bg-white border-b border-slate-300'>
          <div class="hidden searchItems">
        {% for post in posts %}
        <div class="items-search" >
            {{post.title}}
          </div>
        {% endfor%}
      </div>
       <div class="w-full flex items-center   px-6">
        <a href="/" class='w-[100px] block'>
            <img src="{% static 'images/logo_blog.png' %}" alt="" class="w-full h-full">
        </a>
        <!-- search -->
       <div class="w-[45rem] search_container mx-auto relative z-40">
        <input type="text" id="search-input" class="rounded-sm px-3 search text-sm py-2 border border-slate-300 w-full outline-none" placeholder="Tìm kiếm....">
        <div id="search-dropdown" class="absolute hidden search_item bg-white overflow-hidden flex flex-col shadow-md top-full left-0 right-0 p-2 w-full">
          <p class="w-full py-1 px-2">tìm kiếm...</p>
          
        </div>
      </div>

          <!-- loggin -->
        {% if  user and  current_user %}
         <div class="flex items-center">
          <a href="{% url 'addpost' %}" class="text-sm py-4 rounded-sm px-4">tạo blog</a>
          <a href="/blog/mine" class="text-sm py-4 rounded-sm px-4">blogs của tôi</a>
         </div>
        {% endif %}
        {% if  not user or not current_user %}
          {% if request.path == '/login/' %}
            <a href="{% url 'register' %}" class="text-sm py-4 rounded-sm px-4">
              <p class="border-b-2 border-red-300 hover:border-red-300 py-2"> Đăng kí</p>
            </a>
          
            {% else %}
            <a href="{% url 'register' %}" class="text-sm rounded-sm px-4">
              
              <p class="border-b-2 border-white hover:border-red-300 py-2"> Đăng kí</p>
            </a>
          {% endif%}
          {% if request.path == '/register/' %}
            <a href="{% url 'login' %}" class="text-sm py-4 rounded-sm px-4">
              <p class="border-b-2 border-red-300 hover:border-red-300 py-2"> Đăng nhập</p>
            </a>
            {% else %}
            <a href="{% url 'login' %}" class="text-sm rounded-sm px-4">
              
              <p class="border-b-2 border-white hover:border-red-300 py-2"> Đăng nhập</p>
            </a>
          {% endif%}
        {% endif %}

        {% if user %}
            <a href="/user/profile/{{current_user.id}}" class="px-2 text-sm relative logged_in flex items-center">
              <img src="/static/images/user-icon.png" class="mr-2 w-6 h-6 rounded-full" alt=""> 
              {{ user.username }}
            </a>
            {% if user.username %}
            <a href="{% url 'logout' %}" class="absolute top-14 right-12 logged_in_item bg-white px-6 py-1.5 shadow whitespace-nowrap">Đăng xuất</a>
          {% endif %}
        {% endif %}

        </nav>
       </div>    
       <div class="w-full text-sm flex items-center  justify-between">
          <div class="flex items-center">
              {% if request.path == '/' %}
            <a href="/" class="px-2   border-white ">
              <p class="border-b-4 py-1  block border-red-400 ">Trang chủ</p>
            </a>
            {% else %}
            <a href="/" class="px-2   border-white ">
              <p class="border-b-4 py-1  hover:border-red-400 border-white ">Trang chủ</p>
            </a>
          {% endif %}
          
          <div class="relative cateProd cursor-pointer  border-b-2 hover:border-red-300 border-white">
            Danh sách
              <div class="absolute top-full w-24 childCateProd right-0  bg-white  py-2 rounded-sm shadow-lg ">
                <a href="/category/du lịch" class="px-2 py-1 inline-block whitespace-nowrap hover:bg-red-50 text-sm w-full">du lịch</a>
                <a href="/category/thức ăn" class="px-2 py-1 inline-block whitespace-nowrap hover:bg-red-50 text-sm w-full ">thức ăn</a>
                <a href="/category/công việc" class="px-2 py-1 inline-block whitespace-nowrap hover:bg-red-50 text-sm w-full ">công việc</a>
                <a href="/category/giải trí" class="px-2 py-1 inline-block whitespace-nowrap hover:bg-red-50 text-sm w-full ">giải trí</a>
              </div>
          </div>
          <a href="/category/du lịch" class="px-4 border-b-2 hover:border-red-300 border-white py-1">Du lịch </a>
          <a href="/category/thức ăn" class="px-4 border-b-2 hover:border-red-300 border-white py-1">Thức ăn</a>
          </div>
        
       </div>
    </div>
     
            {% comment %} body {% endcomment %}
    <div class='w-full h-full'>
        {% block content %}
         
        
        {% endblock %}
    </div>

    <footer class="bg-gray-900 text-white w-full mt-[10rem]">
      
  <div class=" mx-auto px-8 pt-8 flex flex-wrap justify-between">
    <div class="w-full md:w-1/2 lg:w-1/4 mb-8">
      <h2 class="text-xl font-semibold mb-4">About Us</h2>
      <p class="text-sm">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultricies ligula ut elit ultrices.</p>
    </div>
    <div class="w-full md:w-1/2 lg:w-1/4 mb-8">
      <h2 class="text-xl font-semibold mb-4">Services</h2>
      <ul class="text-sm">
        <li><a href="#" class="hover:text-gray-400">Web Design</a></li>
        <li><a href="#" class="hover:text-gray-400">Graphic Design</a></li>
        <li><a href="#" class="hover:text-gray-400">Digital Marketing</a></li>
        <li><a href="#" class="hover:text-gray-400">SEO</a></li>
      </ul>
    </div>
    <div class="w-full md:w-1/2 lg:w-1/4 mb-8">
      <h2 class="text-xl font-semibold mb-4">Contact Us</h2>
      <p class="text-sm">123 Main Street<br>City, State, ZIP<br>Email: info@example.com<br>Phone: 123-456-7890</p>
    </div>
    <div class="w-full md:w-1/2 lg:w-1/4 mb-8">
      <h2 class="text-xl font-semibold mb-4">Follow Us</h2>
      <ul class="text-sm">
        <li><a href="#" class="hover:text-gray-400">Facebook</a></li>
        <li><a href="#" class="hover:text-gray-400">Twitter</a></li>
        <li><a href="#" class="hover:text-gray-400">Instagram</a></li>
        <li><a href="#" class="hover:text-gray-400">LinkedIn</a></li>
      </ul>
    </div>
  </div>
  <div class="border-t border-gray-700 pt-8 text-center">
    <p class="text-sm">&copy; 2024 Your Company. All rights reserved.</p>
  </div>
</footer>
</body>
<script >
  var searchContainer = document.querySelector('.search_container');
  var searchBar = document.querySelector('.search_item');
  var searchInput = document.getElementById('search-input');
  document.addEventListener('click', function(event) {
      var isClickInside = searchContainer.contains(event.target);
      if (isClickInside) {

        searchBar.classList.remove('hidden') 
      } else {
            searchBar.classList.add('hidden') 
      }
  });
  searchInput.addEventListener('input',(e)=>{
    const value = e.target.value
    const result = handleSearch(value)
    searchBar.innerHTML = `<a href="/search/${result}" class='px-2 text-sm' >${result}</a>`

  })
function handleSearch(value){

  const items = document.querySelector('.searchItems')
  const searchValue = value.toLowerCase()

  let getTitleSearch = items.querySelectorAll('.items-search')
  let titlesSearch = [] 
  for(let i = 0;i<getTitleSearch.length;i++){
    titlesSearch.push(getTitleSearch[i].innerHTML.trim())
  }
  for(let i = 0 ;i< titlesSearch.length;i++){
    if(titlesSearch[i].includes(searchValue)){
      return titlesSearch[i]
    }
  }
  return 'không tìm thấy'
}
 
</script>
</html>